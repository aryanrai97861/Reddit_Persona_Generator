# Reddit User Persona Generator

A comprehensive tool that analyzes Reddit user profiles and generates detailed personas based on their posts, comments, and activity patterns. This project combines web scraping, data analysis, and LLM integration to create insightful user personas.

## Features

- **Comprehensive Data Collection**: Scrapes posts, comments, and user metadata from Reddit profiles
- **Advanced Analysis**: Performs sentiment analysis, topic extraction, and activity pattern analysis
- **LLM-Powered Persona Generation**: Uses Google Gemini to create detailed, human-like personas
- **Citation Tracking**: Provides specific citations for each persona characteristic
- **Structured Output**: Generates well-formatted text files with complete analysis
- **Rate Limiting & Error Handling**: Robust error handling and API rate limiting

## Requirements

- Python 3.8+
- Reddit API credentials
- Google Gemini API key

## Installation

1. **Clone the repository**:
   ```bash
   git clone <repository-url>
   cd reddit-persona-generator
   ```

2. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

3. **Set up environment variables**:
   - Copy `env_example.txt` to `.env`
   - Fill in your API credentials:
     ```bash
     cp env_example.txt .env
     ```

## API Setup

### Reddit API Setup
1. Go to https://www.reddit.com/prefs/apps
2. Click "Create App" or "Create Another App"
3. Select "script" as the app type
4. Fill in the required fields:
   - Name: `RedditPersonaGenerator`
   - Description: `A tool for generating user personas`
   - About URL: Can be left blank
   - Redirect URI: `http://localhost:8080`
5. Note down the client ID (under the app name) and client secret

### Google Gemini API Setup
1. Go to https://makersuite.google.com/app/apikey
2. Create a new API key
3. Copy the key to your `.env` file

## Usage

### Basic Usage
```bash
python reddit_persona_generator.py
```

When prompted, enter a Reddit profile URL (e.g., `https://www.reddit.com/user/kojied/`)

### Programmatic Usage
```python
from reddit_persona_generator import RedditPersonaGenerator

# Initialize the generator
generator = RedditPersonaGenerator()

# Generate persona
filename = generator.generate_persona(
    reddit_url="https://www.reddit.com/user/kojied/",
    max_posts=50,
    max_comments=100
)

print(f"Persona saved to: {filename}")
```

## Output Format

The tool generates a comprehensive text file containing:

1. **User Information**: Basic profile details and statistics
2. **Generated Persona**: Detailed persona with sections for:
   - Demographics & Background
   - Personality Traits
   - Interests & Hobbies
   - Communication Style
   - Online Behavior Patterns
   - Values & Beliefs
   - Professional/Educational Background
   - Social Interactions & Community Engagement
3. **Analysis Data**: Statistical analysis of user activity
4. **Citations**: Specific posts and comments that support each persona characteristic

### Example Output Structure
```
================================================================================
REDDIT USER PERSONA ANALYSIS
================================================================================

Generated on: 2024-01-15 14:30:25
Username: kojied
Account Created: 2020-03-15
Total Karma: 15420

================================================================================
USER PERSONA
================================================================================

[Detailed persona generated by LLM]

================================================================================
ANALYSIS DATA
================================================================================

Activity Summary:
- Total Posts Analyzed: 45
- Total Comments Analyzed: 89
- Subreddits Active In: 23

Top Subreddits:
- r/technology: 15 interactions
- r/programming: 12 interactions
...

================================================================================
CITATIONS
================================================================================

High-Scoring Posts (Interest Indicators):
- "My experience with Python async programming..."
  URL: https://reddit.com/r/programming/comments/... (Score: 127)

...
```

## Configuration Options

You can customize the analysis by modifying these parameters:

- `max_posts`: Maximum number of posts to analyze (default: 50)
- `max_comments`: Maximum number of comments to analyze (default: 100)
- `max_tokens`: Maximum tokens for LLM response (default: 1500)
- `temperature`: LLM creativity level (default: 0.7)

## Technical Details

### Data Collection
- Uses PRAW (Python Reddit API Wrapper) for efficient data collection
- Implements rate limiting to respect Reddit's API limits
- Collects both posts and comments with metadata

### Analysis Pipeline
1. **Text Processing**: Cleans and normalizes text data
2. **Sentiment Analysis**: Uses TextBlob for sentiment scoring
3. **Topic Extraction**: Identifies key interests and topics
4. **Activity Analysis**: Analyzes posting patterns and subreddit preferences
5. **LLM Integration**: Uses Google Gemini for persona generation

### Error Handling
- Robust error handling for API failures
- Graceful degradation when data is unavailable
- Comprehensive logging for debugging

## Limitations

- Requires valid Reddit API credentials
- Limited by Reddit's API rate limits
- Analysis quality depends on available user data
- Requires Google Gemini API credits for persona generation

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Support

For issues and questions:
1. Check the troubleshooting section below
2. Review the logs for error messages
3. Ensure all API credentials are correctly configured

## Troubleshooting

### Common Issues

1. **Reddit API Errors**:
   - Verify your Reddit API credentials
   - Check if your Reddit account has 2FA enabled
   - Ensure your user agent string is unique

2. **Google Gemini API Errors**:
   - Verify your Google Gemini API key
   - Check your API usage and credits
   - Ensure you have access to Gemini Pro

3. **Rate Limiting**:
   - The tool includes built-in rate limiting
   - If you encounter rate limits, wait a few minutes and retry

4. **Data Collection Issues**:
   - Some users may have private or deleted content
   - The tool will work with available data
   - Check logs for specific error messages

### Performance Tips

- Reduce `max_posts` and `max_comments` for faster processing
- Use a lower `temperature` value for more consistent personas
- Monitor API usage to avoid hitting rate limits 